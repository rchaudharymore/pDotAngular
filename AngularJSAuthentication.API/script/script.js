function loadScreen(){}function toggleModuleHelper(e,t,n){e&&(e.is(":hidden")?($j(n).length&&$j(n).addClass("icon-minus").removeClass("icon-plus"),Cookies.set("showDisplay_"+t,"true",{expires:2592e3})):($j(n).length&&$j(n).addClass("icon-plus").removeClass("icon-minus"),Cookies.set("showDisplay_"+t,"false",{expires:2592e3})),e.slideToggle(400,"easeInOutCubic"))}function toggleModule(e,t){var n=$j("#"+e);toggleModuleHelper(n,e,t)}function toggleElement(e){var t=$j("#"+e);t&&t.slideToggle(400,"easeInOutCubic")}function toggleModuleByClass(e,t){var n=$j("."+e);toggleModuleHelper(n,e,t)}function toggleDisplay(e){toggleDisplay(e,!0)}function toggleDisplayAnimated(e,t,n,a,r){(n===void 0||null===n)&&(n=400);var i={duration:n,easing:"easeInOutCubic",complete:r};a===void 0||null===a?t===void 0||null===t?$j("#"+e).slideToggle(i):t?$j("#"+e).slideDown(i):$j("#"+e).slideUp(i):t===void 0||null===t?$j("#"+e).fadeToggle(i):t?$j("#"+e).fadeIn(i):$j("#"+e).fadeOut(i)}function allowSave(){$j("a.pi-mce-savebutton").removeClass("mceButtonDisabled")}function autoSave(e){try{var t=$j("#wizard_form"),n=t.attr("action");t.triggerHandler("submit"),$j.ajax({url:n+"/sv/true",type:"POST",data:t.serialize(),success:function(){$j(".autosave-message").text("Last saved at: "+prettyTime(new Date)),$j("a.pi-mce-savebutton").addClass("mceButtonDisabled"),e!==void 0&&e()}})}catch(a){window.console&&window.console.log("Autosave error: "+a)}}function toggleDisplay(e,t){var n=document.getElementById(e);if(n)if("none"===n.style.display&&t!==!1)if("TR"===n.tagName)try{n.style.display="table-row"}catch(a){n.style.display="block"}else n.style.display="SPAN"===n.tagName&&"description"===n.className?"block":"SPAN"===n.tagName||"INPUT"===n.tagName?"inline":"block";else t!==!0&&(n.style.display="none")}function collapseNavModules(e){for(var t,n=["nav_marketing","nav_prospect","nav_report","nav_administration","nav_superroot"],a=0;n.length>a;a++)n[a]!==e&&(t=document.getElementById(n[a]),t&&(t.style.display="none",Cookies.set("showDisplay_"+n[a],"false",{expires:2592e3})))}function registerSetFocus(e){if(e=e?document.getElementById(e):document.getElementById("center-stage")){var t=e.getElementsByTagName("INPUT")[0];t&&"text"===t.type&&"none"!==t.parentNode.style.display&&t.focus()}}function addPeriodicalExecutor(e){void 0===document.periodicalExecuters&&(document.periodicalExecuters=[]),document.periodicalExecuters.push(e)}function stopPeriodicalExecutors(){if(void 0!==document.periodicalExecuters)for(var e=0;document.periodicalExecuters.length>e;e++)document.periodicalExecuters[e].stop()}function highlightStars(e,t,n){for(var a=1;t>=a;a++)n?Element.addClassName($("rating_"+e+"_"+a),"ratehover"):Element.removeClassName($("rating_"+e+"_"+a),"ratehover")}function insertTextAtCursor(e,t){var n=document.getElementById(e);if(document.selection){n.focus();var a=document.selection.createRange();a.text=t}else if(parseInt(n.selectionStart)>=0){var r=n.selectionStart,i=n.selectionEnd;n.value=n.value.substring(0,r)+t+n.value.substring(i,n.value.length)}else n.value+=t}function tinymceLoadEditor(e){tinymceRemoveEditor(e),tinyMCE.execCommand("mceAddControl",!1,e)}function tinymceRemoveEditor(e){var t=tinyMCE.get(e);t&&(tinymce.isIE?delete tinymce.EditorManager.editors[t.id]:tinymce.EditorManager.remove(t))}function tinymceSave(){return tinyMCE.triggerSave(!0,!0),tinyMCE.onBeforeUnload.listeners=[],!0}function tinymceInsertText(e,t){tinyMCE.execInstanceCommand(e,"mceInsertContent",!1,t)}function ckeditorLoadEditor(e,t,n){ckeditorRemoveEditor(e,t,n)}function ckeditorRemoveEditor(e,t,n){CKEDITOR.instances[e],t?(t="/js/ckeditor/"+t,CKEDITOR.replace(e,{customConfig:t,piemailfield:{emailTagOptions:n}})):CKEDITOR.replace(e)}function ckeditorSave(){if("undefined"!=typeof CKEDITOR){for(var e in CKEDITOR.instances)CKEDITOR.instances.hasOwnProperty(e)&&CKEDITOR.instances[e].updateElement();return!0}}function ckeditorInsertText(e,t){CKEDITOR.instances.editor1.insertText(t)}function prepareAjaxForm(e){registerSetFocus(e)}function ajaxPagerGetTotalChecked(e){return jQuery("#"+e+" input.datatable-checkbox:checked").length}function confirmBatchAction(e,t){var n=ajaxPagerGetTotalChecked(e),a=$j.Event("keypress");if(a.which=13,a.keyCode=13,$j(".ui-autocomplete-input").each(function(){var e=$j(this);e.val()!==e.attr("data-default")&&""!==e.val()&&e.trigger(a)}),0===n)return alert("Please select one or more "+t),void 0;var r=jQuery("#"+e);r.find("input.check_all_selected").val()>0&&(n="ALL "+r.find("input.check_all_num_results").val());var i=r.find("select.multi-select"),o={multiAddList:r.find("select.multi-list-add option:selected").text(),multiRemoveList:r.find("select.multi-list-remove option:selected").text(),multiAssignUser:r.find("select.multi-user-assign option:selected").text(),multiAssignGroup:r.find("select.multi-group-assign option:selected").text()},s=generateSelectedBatchActionMessage(jQuery(i).val(),t,n,o);return"string"==typeof s?confirm(s):s}function generateSelectedBatchActionMessage(e,t,n,a){var r="",i=n+" "+t;switch(e){case"deletes":r="Delete "+i+"?";break;case"undelete":r="Undelete "+i+"?";break;case"permanentlyDelete":r="Permanently Delete "+i+"?";break;case"hide":r="Hide "+i+"?";break;case"unhide":r="Unhide "+i+"?";break;case"multiReviewed":r="Mark "+i+" as reviewed?";break;case"multiAddList":r="Add "+i+' to "'+a.multiAddList+'" list?';break;case"multiRemoveList":r="Remove "+i+' from "'+a.multiRemoveList+'" list?';break;case"multiRemoveSpecificList":r="Remove "+i+" from this list?";break;case"multiAssignUser":r="Assign "+i+' to user "'+a.multiAssignUser+'"?';break;case"multiAssignGroup":r="Assign "+i+' to group "'+a.multiAssignGroup+'"?';break;case"multiAddTags":r="Add tags to "+i+"?";break;case"multiEnableEmailTemplate":r="Enable use for "+i+"?";break;case"multiDisableEmailTemplate":r="Disable use for "+i+"?";break;case"multiRemoveTags":r="Remove tags from "+i+"?";break;case"multiRemoveSpecificTag":r="Remove tags from "+i+"?";break;case"multiJobStatus":r="Set requested status to "+i+"?";break;case"multiMerge":r=!0,(2>n||n>3)&&(alert("Please select between 2 and 3 "+t+" to merge."),r=!1);break;case"reset":r="Reset "+i+"?";break;case"multiSendActivationEmail":r="Resend activation emails to "+i+"?";break;case"multiAddConnectorSSO":r="Try to enable CRM single signon for "+i+"?";break;case"multiAllowChatAccess":r="Try to allow chat access for "+i+"?";break;case"multiDisallowChatAccess":r="Try to disallow chat access for "+i+"?";break;case"multiAddToFolder":r="Put "+i+" in this folder?";break;case"multiUserRole":r="Set "+i+" to this role?";break;case"multiChangeEmail":r="Add +deleted to email for "+i+"?";break;case"multiUserProspectCreateAndAddToList":r="Create prospects from "+i+"?";break;case"multiUserPreference":r="Set this preference for "+i+"?";break;case"multiStarProspects":r="Star "+i+"?";break;case"multiUnStarProspects":r="Un-star "+i+"?";break;case"multiAddUsersToGroup":r="Add "+i+" to group?";break;case"multiConvertSsoUsersToSynced":r="Convert "+i+" to Synced?";break;default:alert("Please select an action."),r=!1}return r}function confirmSetSortOrder(){var e="";return $j("span[id^=draggable]")&&$j("span[id^=draggable]").each(function(t,n){e&&(e+=","),e+=n.id.substr(9)}),e?($j("#sortOrder").val(e),confirm("Are you sure you wish to set this sort order?")):(alert("There are no rows to sort."),!1)}function toggleCustomInput(e){var t=$(e.id.replace("_selector","")),n=e.options[e.selectedIndex];t.style.display="-custom-"===n.value?"inline":"none"}function convertToId(e,t){var n="";if(0===t.value.length&&e.length>0){for(var a=0;e.length>a;a++){var r=e.charAt(a);r>="a"&&"z">=r||r>="A"&&"Z">=r||r>="0"&&"9">=r?(0===a&&r>="0"&&"9">=r&&(n+="Custom_"),n+=r):n+="_"}t.value="_"===n.substring(0,n.length-2,1)?n.substring(0,n.length-1):n}return!0}function countLines(strtocount,cols){for(var hard_lines=1,last=0;;)if(last=strtocount.indexOf("\n",last+1),hard_lines++,-1===last)break;var soft_lines=Math.round(strtocount.length/(cols-1)),hard=eval("hard_lines	"+unescape("%3e")+"soft_lines;");return hard&&(soft_lines=hard_lines),soft_lines}function resizeTextarea(e){var t=document.getElementById(e);if(t){var n=countLines(t.value,t.cols)+1;15*n>t.offsetHeight&&(t.style.height=15*n+"px")}setTimeout("resizeTextarea('"+e+"');",300)}function cancelFormClearInnerHTML(e){var t=document.getElementById(e);t&&("TR"!==t.tagName&&"tr"!==t.tagName||!t.firstChild?t.innerHTML="":t.firstChild.innerHTML="")}function showWizardPagerDiv(e,t){if("block"!==$(e).style.display){if(t){var n=Position.cumulativeOffset(t);n[0]+230>Element.getWidth(document.body)&&(n[0]=Element.getWidth(document.body)-230),$(e).style.left=n[0]+"px"}Effect.Appear(e,{duration:1}),-1===observingPopupElements.indexOf(e)&&(observingPopupElements.push(e),Event.observe(document.body,"click",function(n){var a=Event.element(n);a.id!==t.id&&(Element.descendantOf(a,$(e))||($(e).style.display="none"))}.bind(e)))}}function disablePreviewForm(e){var t,n=window.frames[e].document.getElementsByTagName("input");for(t=0;n.length>t;t++)("SUBMIT"===n[t].type.toUpperCase()||"BUTTON"===n[t].type.toUpperCase())&&(n[t].setAttribute("disabled","true"),n[t].disabled="true");for(n=window.frames[e].document.getElementsByTagName("a"),t=0;n.length>t;t++)n[t].setAttribute("href","#"),n[t].href="#"}function wizardSubmitAndJump(e,t){ckeditorSave();var n=$j("#skip_to_step_id"),a=$j("#wizard_form");a.length&&(n.length||(window.location=t),n.val(e),a.trigger("submit"))}function php_serialize(e){var t="";if("object"==typeof e){t="a:";var n="",a=0;for(var r in e)e.hasOwnProperty(r)&&(n+=php_serialize(r),n+=php_serialize(e[r]),a++);t+=a+":{",t+=n,t+="}"}else switch(typeof e){case"number":t+=0!==e-Math.floor(e)?"d:"+e+";":"i:"+e+";";break;case"string":e=standardizeNewLines(e),t+="s:"+e.length+':"'+e+'";';break;case"boolean":t+=e?"b:1;":"b:0;"}return t}function standardizeNewLines(e){for(var t="\r\n",n=/[^\r]\n/g,a=e.search(n);a>-1;){var r=e.slice(0,a+1)+t,i=e.substr(a+2);e=r+i,a=e.search(n)}var o=/\r(?!\n)/g;return e=e.replace(o,t),e=e.replace(/^\n/g,t),e=e.replace(/\r$/g,t)}function addCommas(e){e+="";for(var t=e.split("."),n=t[0],a=t.length>1?"."+t[1]:"",r=/(\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1,$2");return n+a}function addNewArrayElement(e,t,n,a){Element.extend(e),Element.extend(t);var r=cloneAndAppendElement(e,t);return setArrayIndexForDescendants(r,n,a),r}function addOptionToPeerDropdowns(e,t,n,a){if(Element.extend(e),Element.extend(t),null!==a&&!a||""!==e.value){var r=e.parentNode;Element.extend(r);var i=r.className;r.className="",t.getElementsBySelector("select."+i).each(function(t){var n=new Option;n.value=e.value,n.text=e.text;for(var a=t.options,r=!0,i=0;a.length>i;i++){if(a[i].text===n.text){r=!1;break}if(""!==a[i].value&&a[i].text>n.text){try{t.add(n,a[i])}catch(o){a.add(n,i)}r=!1;break}}if(r)try{t.add(n,null)}catch(o){a.add(n)}}),r.className=i}}function cloneAndAppendElement(e,t){Element.extend(e),Element.extend(t);var n=e.cloneNode(!0);return n.removeAttribute("id"),n.descendants().each(function(e){e.removeAttribute("id")}),n.show(),t.parentNode.insertBefore(n,t),n}function cloneAndReplaceElement(e,t){Element.extend(e),Element.extend(t);var n=cloneAndAppendElement(e,t);return Element.remove(t),n}function dropdownElementEmpty(e,t){Element.extend(e);var n=0;return(null===t||t)&&(n=1),e.options.length===n}function getSelectedOption(e){var t=e.options[e.selectedIndex];return Element.extend(t),t}function inArray(e,t){for(var n=0;e.length>n;n++)if(e[n]===t)return!0;return!1}function removeOptionFromPeerDropdowns(e,t,n,a){if(Element.extend(e),Element.extend(t),null!==a&&!a||""!==e.value){var r=e.parentNode,i=r.className;r.className="",t.getElementsBySelector("select."+i).each(function(t,a){if(Element.extend(t),null!==n&&t.id===n||t.value!==e.value){a=null;for(var r=0;t.options.length>r;r++)if(t.options[r].value===e.value){a=r;break}null!==a&&t.remove(a)}}),r.className=i}}function setArrayIndexForDescendants(e,t,n){Element.extend(e),e.descendants().each(function(e){var a=e.name;if(a!==void 0){var r=a.indexOf(n);r>0&&(e.name=a.substr(0,r)+"["+t+"]"+a.substr(r+n.length))}})}function cancelAllPendingAjax(){activeAjaxRequests.each(function(e){e.transport.abort()}),activeAjaxRequests=[]}function setupAsmSelect(){"string"!=typeof objectName&&(objectName="list");var e=objectName[0].toUpperCase()+objectName.substr(1);jQuery(".asmSelect").each(function(){-1===this.parentNode.className.indexOf("asmContainer")&&jQuery(this).asmSelect({animate:!0,addItemTarget:"top",highlight:!0,countNotice:!0,countSuffix:objectName+"(s) selected",countLabel:"No "+e+" selected",disabledItemClass:"asmListOptOut"})}),ieSelectBoxInit()}function setupAsmSelectMerge(){jQuery(".asmSelect").asmSelect({animate:!0,addItemTarget:"top",highlight:!0,countLabel:"No Lists selected",disabledItemClass:"asmListOptOut"}),jQuery(".asmSelect").prop("disabled",!0),jQuery(".asmSelect").css("width","200px"),jQuery(".asmListItemRemove").css("display","none")}function hideAllActionMenus(){$j("td.new-actions .actions-menu-wrapper .actions-menu").hide(),clearTimeout(hideAllMenusTimeout)}function ieSelectBoxInit(){if($j("html").is(".lt-ie9")){var e;$j("select:not('.input-auto, .no-resize')").each(function(){e=$j(this),e.data("origWidth",e.outerWidth())}).mouseenter(function(){$j(this).css("width","auto")}).bind("blur change",function(){e=$j(this),e.css("width",e.data("origWidth"))})}}function archiveDatePicker(e){$j(e).datepicker().on("changeDate",function(){$j("div.datepicker").hide()})}function updateRelationRule(e,t,n,a){var r="#"+(""+(n+a));e===t?$j(r).parent().parent().parent().removeClass("automation-rule").addClass("rule-group-actions relation-group-wrapper"):$j(r).hasClass("automation-rule")||$j(r).removeClass("rule-group-actions").removeClass("relation-group-wrapper").addClass("automation-rule")}function focusElement(e){"string"==typeof e&&(0!==e.indexOf("#")&&(e="#"+e),$j(e).focus())}function createNewSplit(e){var t=findSplitContainer(e);if(!canAddNewSplit(t))return alert("Unable to split list further!"),void 0;var n=t.find("div.splits").first(),a=t.parent().find("div.split-template").clone(!0).removeClass("split-template");a.appendTo(n);var r=incrementSplitCount(t,1),i=t.find("input.list-name").val();a.find("input.split-name").val(i+"_split"+r),calculateSplitCount(t)}function canAddNewSplit(e){var t=e.find("input.split-evenly-check").prop("checked"),n=parseInt(e.find("input.total-count").val()),a=parseInt(e.find("input.total-splits").val());return t&&1===Math.floor(n/(a+1))?!1:!0}function addSplit(e,t,n,a){var r=e.find("div.splits").first(),i=e.parent().find("div.split-template").clone(!0).removeClass("split-template");i.find("input.split-name").val(t),i.find("input.split-percent").val(n),i.appendTo(r),a&&(i.addClass("error alert alert-error"),i.find(".controls").append('<span class="help-inline">'+a+"</span>")),incrementSplitCount(e,1),calculateSplitCount(e)}function updateSplitCount(e){calculateSplitCount(findSplitContainer(e))}function calculateSplitCount(e){var t,n,a,r=parseInt(e.find("input.total-count").val()),i=parseInt(e.find("input.total-splits").val()),o=e.find("input.split-evenly-check").prop("checked");if(0!==i)if(o){var s=Math.floor(r/i);for(t=Math.floor(100*(1/i)),n=r,a=0;i>a;a++)a+1===i&&n>s&&(s=n),e.find("span.split-count:eq("+a+")").html("("+s+" prospects)"),e.find("input.split-percent:eq("+a+")").val(t),n-=s;e.find("span.total-percent").html("100"),e.find("span.total-percent").css("color","green")}else{var l=0;for(a=0;i>a;a++)t=parseInt(e.find("input.split-percent:eq("+a+")").val()),isNaN(t)?e.find("input.split-percent:eq("+a+")").val(0):l+=t;if(e.find("span.total-percent").html(l),100!==l){for(a=0;i>a;a++)e.find("span.split-count:eq("+a+")").html("");e.find("span.total-percent").css("color","red")}else{for(n=r,a=0;i>a;a++){t=.01*parseInt(e.find("input.split-percent:eq("+a+")").val());var c=Math.round(r*t);c>n&&(c=n),e.find("span.split-count:eq("+a+")").html("("+c+" prospects)"),n-=c}e.find("span.total-percent").css("color","green")}}}function findSplitContainer(e){return jQuery(e).parents("form.form").first()}function toggleSplitEvenly(e){var t=findSplitContainer(e);jQuery(e).prop("checked")===!0?t.parent().find("input.split-percent").prop("disabled",!0):t.parent().find("input.split-percent").prop("disabled",!1),calculateSplitCount(t)}function incrementSplitCount(e,t){var n=parseInt(e.find(".total-splits").val())+t;return 0>n&&(n=0),e.find(".total-splits").val(n),n}function removeSplit(e){var t=findSplitContainer(e),n=parseInt(t.find(".total-splits").val());return 2>=n?(alert("You must have atleast two splits."),void 0):(jQuery(e).parent().parent().remove(),incrementSplitCount(t,-1),calculateSplitCount(t),void 0)}function validateSplitSubmit(e){var t=parseInt(e.find(".total-splits").val());if(2>t)return alert("Please create atleast two splits"),!1;var n,a,r=[],i=e.find("input.split-evenly-check").is(":checked");if(i)for(a=0;t>a;a++)n=e.find("input.split-name:eq("+a+")").val(),r.push(n);else{var o=0;for(a=0;t>a;a++){var s=parseInt(e.find("input.split-percent:eq("+a+")").val());if(n=e.find("input.split-name:eq("+a+")").val(),isNaN(s))return alert("Split #"+(a+1)+" '"+n+"' has an invalid percentage"),!1;if(0===s)return alert("Split #"+(a+1)+" '"+n+"' must have a percentage greater than 0"),!1;o+=s,r.push(n)}if(100!==o)return alert("The total must add up to 100%"),!1}for(a=0;r.length>a;a++)for(var l=0;r.length>l;l++)if(l!==a&&r[a]===r[l])return alert("Splits #"+a+" and #"+l+" must have unique names"),!1;return!0}function prettyTime(e){if(!e)return"";var t="",n=e.getHours();t=12>n?"AM":"PM",0===n&&(n=12),n>12&&(n-=12);var a=e.getMinutes();return a+="",1===a.length&&(a="0"+a),n+":"+a+" "+t}function splitSubmitForum(e){var t=findSplitContainer(e);return validateSplitSubmit(t)&&t.submit(),!1}function highlightMergeColumn(e,t,n){var a=jQuery(e).closest("table"),r=a.find("td.mergeColumn"+t),i=a.find("td.mergeColumn"+t+"even");r&&(r.addClass("highlight"),i.addClass("highlightEven"));for(var o=0;n>o;o++)o!==t&&(r=a.find("td.mergeColumn"+o),i=a.find("td.mergeColumn"+o+"even"),r&&(r.removeClass("highlight"),i.removeClass("highlightEven")))}function updateSeparators(){$j(".automation-separator").show().removeClass("match1").removeClass("match2"),$j(".automation-rule-operator").each(function(){var e=$j(".match-all input",this),t=$j(".match-any input",this),n=$j(this).siblings(".automation-separator"),a=1;e.prop("checked")?a=parseInt(e.val()):t.prop("checked")&&(a=parseInt(t.val()));var r=1===a?"match1":"match2";n.addClass(r)}),$j(".automation-separator").next().is(".automation-separator")&&$j(".automation-separator").each(function(){$j(this).next().is(".automation-separator")&&$j(this).insertBefore($j(this).prev())}),$j(".automation-rule-operator").each(function(){$j(this).siblings(".automation-separator:last").hide()})}function draggableHelper(e,t){var n=t.children(),a=t.clone();return a.children().each(function(e){$j(this).width(n.eq(e).width())}),a}function addslashes(e){return(e+"").replace(/[\\"']/g,"\\$&")}function html_entities(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function textTinyResize(){var e=$j(this),t=e.val();10>t?e.width(18):100>t?e.width(28):e.width(38)}function initDatepicker(){$j(document).on("focus","input.datepicker",function(){$j("input.datepicker").datepicker({format:"yyyy-mm-dd"}),$j("input.datepicker").not($j(this)).datepicker("hide")}),$j(".date-filter input.date.start").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,maxDate:$j(".date-filter input.date.end").val(),onSelect:function(e){$j(this).closest(".date-filter").find("input.date.end").datepicker("option","minDate",e)}}),$j(".date-filter input.date.end").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,minDate:$j(".date-filter input.date.start").val(),maxDate:"0",onSelect:function(e){$j(this).closest(".date-filter").find("input.date.start").datepicker("option","maxDate",e)}})}function checkPasswordErrors(e,t){var n=$j(e),a=$j(t),r=!0;return(n.hasClass("error")||n.hasClass("warning")||a.hasClass("error")||a.hasClass("warning"))&&(r=!1),r}function setPasswordErrors(e){var t=$j(e);t.passwordValidator("setErrors")}function scrollToError(e){var t=$j(e);$j("html,body").animate({scrollTop:t.offset().top-60},"fast")}function passwordToggle(){var e=$j("#password"),t=e.val(),n=e.attr("class"),a=e.parent(),r='<input type="text" name="password" id="password" value="'+t+'" class="'+n+'">',i='<input type="password" name="password" id="password" value="'+t+'" class="'+n+'" >';return"password"===e.attr("type")?(e.remove(),a.prepend(r)):(e.remove(),a.prepend(i)),!1}function substr_replace(e,t,n,a){return e.substr(0,n)+t+e.substr(n+a)}window.onload=loadScreen;var indicatorShow=!1;(function(e){e.fn.hoverIntent=function(t,n){var a={sensitivity:7,interval:100,timeout:0};a=e.extend(a,n?{over:t,out:n}:t);var r,i,o,s,l=function(e){r=e.pageX,i=e.pageY},c=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(o-r)+Math.abs(s-i)<a.sensitivity?(e(n).unbind("mousemove",l),n.hoverIntent_s=1,a.over.apply(n,[t])):(o=r,s=i,n.hoverIntent_t=setTimeout(function(){c(t,n)},a.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,a.out.apply(t,[e])},u=function(t){var n=jQuery.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"==t.type?(o=n.pageX,s=n.pageY,e(r).bind("mousemove",l),1!=r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){c(n,r)},a.interval))):(e(r).unbind("mousemove",l),1==r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){d(n,r)},a.timeout)))};return this.bind("mouseenter",u).bind("mouseleave",u)}})(jQuery),$j.fn.spin=function(e){return this.each(function(){var t=$j(this),n=t.data();n.spinner&&(n.spinner.stop(),delete n.spinner),e!==!1&&(n.spinner=new Spinner($j.extend({color:t.css("color")},e)).spin(this))}),this},$j(function(){$j(document).on("change",'select[name*="rule_operator"]',function(){var e=$j(this),t=parseInt(e.val()),n="";n=-1!==e.attr("id").indexOf("rule_group_rule_operator")?e.attr("id").replace("rule_group_rule_operator","rule_group_rule_value"):e.attr("id").replace("rule_operator","rule_value");var a=n+"_selector",r=[1,2,5,6,12,13],i=$j("#"+n),o=$j("#"+a),s=i.siblings(".between-values");i.hide(),o.hide(),s.hide(),21===t?s.css("display","inline"):(s.children().val(""),-1!==$j.inArray(t,r)?i.show():o.length?(o.show(),o[0].selectedIndex=0):(i.val(""),i.show()))})});var observingPopupElements=[],activeAjaxRequests=[];$j("tfoot form").submit(cancelAllPendingAjax),$j("tfoot ul a").click(cancelAllPendingAjax);var hideAllMenusTimeout;$j(document).ready(function(){$j(".customObjectToggle").hover(function(){$j(this).hasClass("text-success")||$j(this).addClass("icon-ok-circle").removeClass("icon-circle-blank")},function(){$j(this).hasClass("text-success")||$j(this).addClass("icon-circle-blank").removeClass("icon-ok-circle")})}),$j(function(){function e(){$j(this).addClass("submenu-on")}function t(){$j(this).removeClass("submenu-on")}function n(){var e=$j(".js-toggle-help-drawer"),t=$j(".js-toggle-help-drawer-text"),n=$j(".js-toggle-help-drawer-icon"),a="Help";e.hasClass("open")||(a="Hide "+a),e.toggleClass("open"),t.text(a),n.toggleClass("icon-question-sign icon-circle-arrow-right")}function a(){$j("#help-drawer").addClass("open"),$j(".navbar-fixed-top .dropdown-toggle span").hide(),$j("#help-drawer").resizable({alsoResize:"#help-drawer iframe",handles:"w",minWidth:250,maxWidth:800,resize:function(e,t){$j("#wrap, .navbar-fixed-top").css({"margin-right":t.size.width})},start:function(){$j("<div class='invisidiv'>&nbsp;</div>").appendTo("#help-drawer")},stop:function(){$j(".invisidiv").remove()}}),n(),$j(window).resize()}function r(e){$j("#help-drawer, #help-drawer iframe").css("width","350px"),e?($j("#help-drawer").animate({right:0},"fast","easeInOutExpo"),$j("#wrap").animate({"margin-right":350},"fast","easeInOutExpo",function(){a()}),$j(".navbar-fixed-top").animate({"margin-right":350},"fast","easeInOutExpo")):($j("#help-drawer").css({right:0}),$j("#wrap, .navbar-fixed-top").css({"margin-right":350}),a())}function i(){n();var e=$j("#help-drawer"),t=parseInt(e.width(),10),a=-1*t;e.animate({right:a},"fast","easeInOutExpo"),$j("#wrap").animate({"margin-right":0},"fast","easeInOutExpo",function(){e.removeClass("open").css("left",-t),e.width(0).resizable("destroy"),$j(".navbar-fixed-top .dropdown-toggle span").show(),$j(window).resize()}),$j(".navbar-fixed-top").animate({"margin-right":0},"fast","easeInOutExpo"),Cookies.expire("openHelpDrawer")}$j(".module table.data-table tr td:last-child").addClass("last"),$j(".module table.data-table tr th:last-child").addClass("last"),$j("html").is(".lt-ie8")&&$j("#ieCompatibility").show(),$j("#content").tooltip({selector:"[data-toggle=tooltip]"}),$j(document).on("checkboxchange","table.data-table",function(){var e=$j(this).find("input.datatable-checkbox"),t=e.filter(":checked"),n=e.length,a=t.length;$j(this).next(".table-foot").find("span.checkbox-num-selected").html(a),n===a?$j(this).find("input.check-all").prop("checked",!0):($j(this).find("input.check-all").prop("checked",!1),$j(this).find("input.check_all_selected").val(0));var r=$j(this).find("input.check_all_num_results");r.length&&$j(this).closest("table").trigger("show_check_all_message",[n===a]),0===a?$j(this).find("p.multi-checkbox-buttons :button").prop("disabled",!0):$j(this).find("p.multi-checkbox-buttons :button").prop("disabled",!1);var i=$j.map(t,function(e){return $j(e).val()});$j(this).next(".table-foot").find("input.multiCheckIds").val(i.join(","))}),$j(document).on("show_check_all_message","table.data-table",function(e,t){var n=$j(this).closest("table"),a=n.find("input.datatable-checkbox");if(t){var r=n.find("input.check_all_num_results").val(),i=n.find("input.check_all_num_results_int").val();if(i>a.size()){var o=n.find("tr td").length;n.find("tr:first").after('<tr><td class="check-all-message" colspan="'+o+'" style="text-align:center">All '+a.size()+" entries on this page are selected. <a href=\"javascript:;\" onClick=\"$j(this).closest('table').trigger('display_all_checked_message', ['"+r+"'])\">Select all "+r+" entries in this table</a></td></tr>")}}else n.find("td.check-all-message").parent().remove(),n.find("td.all-checked-message").parent().remove()}),$j(document).on("display_all_checked_message","table.data-table",function(e,t){var n=$j(this).closest("table");n.find("td.check-all-message").remove();var a=n.find("tr td").length;n.find("tr:first").after('<tr><td class="all-checked-message" colspan="'+a+'" style="text-align:center">All '+t+" entries in this table are selected. <a href=\"javascript:;\" onClick=\"$j(this).closest('table').trigger('clear_check_all')\">Clear selection</a></td></tr>"),n.next(".table-foot").find("span.checkbox-num-selected").html(t),n.next(".table-foot").find("input.check_all_selected").val(1)}),$j(document).on("clear_check_all","table.data-table",function(){var e=$j(this).closest("table"),t=e.find("input.check-all");t.prop("checked")&&t.click()}),$j(document).on("click","input.check-all",function(){var e=$j(this).closest("table"),t=e.find("input.datatable-checkbox"),n=$j(this).prop("checked");n?t.prop("checked",!0):t.prop("checked",!1),e.trigger("checkboxchange")}),$j(document).on("click","input.datatable-checkbox",function(){$j(this).closest("table").trigger("checkboxchange")}),$j(document).on("click","a.toggle-crm-task-info",function(e){e.preventDefault();var t="div.crm-task-info, div.action-crm-task-form";$j(this).next(t).is(":visible")?($j(this).next(t).slideToggle("slow"),$j(this).text("Show Task Configuration")):($j(this).next(t).slideToggle("slow"),$j(this).text("Hide Task Configuration"))}),$j.waypoints.settings.scrollThrottle=30,$j(".ajaxFancybox").length&&$j(".ajaxFancybox").fancybox({width:"100%",height:"100%",type:"iframe",autoDimensions:!1}),$j("#indicator").spin({top:"9px",left:"9px",color:"#fff",width:4}),indicatorShow&&$j("#indicator").show();var o={over:e,timeout:100,out:t};$j("li.dropdown-submenu").hoverIntent(o),$j("#admin-drawer-toggle").click(function(){$j("#admin-drawer.open").length?($j("#wrap, .navbar-fixed-top").animate({"margin-left":0},"fast","easeInOutExpo"),$j("#admin-drawer").animate({left:"-250px"},"fast","easeInOutExpo",function(){$j("#admin-drawer").removeClass("open").css("left","-250px")})):($j("#admin-drawer").animate({left:0},"fast","easeInOutExpo"),$j("#wrap, .navbar-fixed-top").animate({"margin-left":250},"fast","easeInOutExpo"),$j("#admin-drawer").addClass("open"))}).tooltip(),$j(".js-toggle-help-drawer").mouseover(function(){var e=$j("#help-drawer iframe"),t="https://training.pardot.com/help/?pardotAppModule="+$j("#help-drawer iframe").attr("data-modulename");e.attr("src")!==t&&e.attr("src",t)}).click(function(e){if(e.preventDefault(),$j("#help-drawer.open").length){googleAnalytics("send","event","Help Drawer","Toggle Help Drawer","Close");var t=Cookies.get("openHelpDrawerTime"),n=86400;t&&(n=Math.round((new Date-t)/1e3)),googleAnalytics("send","event","Help Drawer","Help Drawer Elapsed Time","Seconds",n),i()}else{googleAnalytics("send","event","Help Drawer","Toggle Help Drawer","Open");var a=new Date;Cookies.set("openHelpDrawerTime",a.getTime(),{expires:86400}),r(!0)}}).tooltip(),Cookies.get("openHelpDrawer")&&($j(".js-toggle-help-drawer").mouseover(),r(!1)),ieSelectBoxInit();var s=!1,l=!1,c=!1;$j(document).bind("keydown",function(e){if((this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type&&"password"!==e.target.type&&"true"!==$j(e.target).prop("contenteditable"))&&!l){var t=e.keyCode?e.keyCode:e.which;if(192===t&&$j("#dropdown_agency_account_id_chzn").length)return $j("#dropdown_agency_account_id_chzn a").trigger("mousedown"),!1;if(65===t&&$j("#admin-drawer").length)return $j("#admin-drawer-toggle").click(),!1;if(191===t){if(!s)return $j("#query").focus(),!1;$j("#shortcuts").modal("show")}if(72===t&&$j("#recent-history").modal("show"),c){var n=String.fromCharCode(t);if(!$j("li[data-shortcut='"+n+"']").length)return;var a=$j("li[data-shortcut='"+n+"'] > a").attr("href");a=document.location.protocol+"//"+document.location.host+a,window.location.href=a}16===t&&(s=!0),71===t&&(c=!0),(17===t||91===t)&&(l=!0)}}).bind("keyup",function(e){if(this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type&&"true"!==$j(e.target).prop("contenteditable")){var t=e.keyCode?e.keyCode:e.which;16===t&&(s=!1),71===t&&(c=!1),(17===t||91===t)&&(l=!1)}}),$j(".chzn-select").chosen(),$j(".module").on("click",".pager-next",function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text());e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Pagination-Next")}),$j(".module").on("click",".pager-prev",function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text());e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Pagination-Prev")}),$j(".module").on("click",".pager-last",function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text());e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Pagination-Last")}),$j(".module").on("change",'.pager-form [name="page"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text());e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Pagination-Input")}),$j(".module").on("change",'[name="pageSize"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(this).val();e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Show Rows",t)
}),$j(".module").on("focus",'[name="table_filter"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text());e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Table Filter")}),$j(".module").on("click",".data-table thead a",function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(this).text();e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Table Sort",t)}),$j(".module").on("change",'[name="view"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(":selected",this).text();e||(e=document.title.substr(0,document.title.length-" - Pardot".length)),e+=" Table",googleAnalytics("send","event",e,"Table View",t)}),$j("ul.recent").on("click","a",function(){googleAnalytics("send","event","Recent History","Click")})}),$j(function(){$j(".data-table tbody.draggable").sortable({containment:".data-table",axis:"y",opacity:.9,helper:draggableHelper}),$j(".data-table tbody.draggable").disableSelection()}),$j(function(){$j(document).on("click",".data-table tr",function(e){var t=$j(e.target);if($j(".first.checkbox",this).length&&t.is("td")){var n=$j(".first.checkbox input",this),a=n.prop("checked",!0),r=$j(this).closest("table");n.prop("checked",!a),r.trigger("checkboxchange")}});var e=navigator.userAgent,t=e.match(/iPad/i)?"touchstart":"click";e=navigator.userAgent,t=e.match(/iPhone/i)?"touchstart":"click",initDatepicker(),$j("#content").on("change",".date-filter select",function(){var e=$j(this),t=e.closest("form.date-filter"),n=t.find(".custom-range"),a=e.val();"7"===a?n.show():(n.hide(),n.find("input").prop("disabled",!0),t.trigger("submit"))}),$j(".text-tiny").each(textTinyResize),$j(document).on("keyup focus",".text-tiny",textTinyResize)}),$j(function(){$j("#password-toggle").change(function(e){e.stopPropagation(),passwordToggle()})}),function(){function e(e){throw e}var t,n,a,r,i,o,s,l,c,d,u,p,f,h,m,g,v,j=void 0,b=!0,y=null,$={}.toString,x="function"==typeof define&&define.c,w="object"==typeof exports&&exports,k='{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',C=new Date(-0xc782b5b800cec);try{C=-109252==C.getUTCFullYear()&&0===C.getUTCMonth()&&1==C.getUTCDate()&&10==C.getUTCHours()&&37==C.getUTCMinutes()&&6==C.getUTCSeconds()&&708==C.getUTCMilliseconds()}catch(S){}if(C||(m=Math.floor,g=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(e,t){return g[t]+365*(e-1970)+m((e-1969+(t=+(t>1)))/4)-m((e-1901+t)/100)+m((e-1601+t)/400)}),x||w?(x&&define("json",w={}),"object"==typeof JSON&&JSON&&(w.stringify=JSON.stringify,w.parse=JSON.parse)):w=this.JSON||(this.JSON={}),a="function"==typeof w.stringify&&!v){(C=function(){return 1}).toJSON=C;try{a="0"===w.stringify(0)&&"0"===w.stringify(new Number)&&'""'==w.stringify(new String)&&w.stringify($)===j&&w.stringify(j)===j&&w.stringify()===j&&"1"===w.stringify(C)&&"[1]"==w.stringify([C])&&"null"==w.stringify(y)&&"[null,null,null]"==w.stringify([j,$,y])&&w.stringify({result:[C,b,!1,y,"\0\b\n\f\r	"]})==k&&"1"===w.stringify(y,C)&&"[\n 1,\n 2\n]"==w.stringify([1,2],y,1)&&'"-271821-04-20T00:00:00.000Z"'==w.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==w.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==w.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==w.stringify(new Date(-1))}catch(_){a=!1}}if("function"==typeof w.parse)try{if(0===w.parse("0")&&!w.parse(!1)&&(C=w.parse(k),l=5==C.a.length&&1==C.a[0])){try{l=!w.parse('"	"')}catch(E){}if(l)try{l=1!=w.parse("01")}catch(T){}}}catch(A){l=!1}C=k=y,a&&l||((t={}.hasOwnProperty)||(t=function(e){var n,a={};return(a.__proto__=y,a.__proto__={toString:1},a).toString!=$?t=function(e){var t=this.__proto__,e=(this.__proto__=y,e in this);return this.__proto__=t,e}:(n=a.constructor,t=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),a=y,t.call(this,e)}),n=function(e,n){var a,r,i,o=0;(a=function(){this.valueOf=0}).prototype.valueOf=0,r=new a;for(i in r)t.call(r,i)&&o++;a=r=y,o?o=2==o?function(e,n){var a,r={},i="[object Function]"==$.call(e);for(a in e)!(i&&"prototype"==a)&&!t.call(r,a)&&(r[a]=1)&&t.call(e,a)&&n(a)}:function(e,n){var a,r,i="[object Function]"==$.call(e);for(a in e)!(i&&"prototype"==a)&&t.call(e,a)&&!(r="constructor"===a)&&n(a);(r||t.call(e,a="constructor"))&&n(a)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,n){var a,i="[object Function]"==$.call(e);for(a in e)!(i&&"prototype"==a)&&t.call(e,a)&&n(a);for(i=r.length;a=r[--i];t.call(e,a)&&n(a));}),o(e,n)},a||(r={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},i=function(e,t){return("000000"+(t||0)).slice(-e)},o=function(e){for(var t,n='"',a=0;t=e.charAt(a);a++)n+='\\"\b\f\n\r	'.indexOf(t)>-1?r[t]:" ">t?"\\u00"+i(2,t.charCodeAt(0).toString(16)):t;return n+'"'},s=function(a,r,l,c,d,u,p){var f,h,g,x,w,k,C,S,_,E=r[a];if("object"==typeof E&&E)if("[object Date]"!=$.call(E)||t.call(E,"toJSON"))"function"==typeof E.toJSON&&(E=E.toJSON(a));else if(E>-1/0&&1/0>E){if(v){for(g=m(E/864e5),f=m(g/365.2425)+1970-1;g>=v(f+1,0);f++);for(h=m((g-v(f,0))/30.42);g>=v(f,h+1);h++);g=1+g-v(f,h),x=(E%864e5+864e5)%864e5,w=m(x/36e5)%24,k=m(x/6e4)%60,C=m(x/1e3)%60,x%=1e3}else f=E.getUTCFullYear(),h=E.getUTCMonth(),g=E.getUTCDate(),w=E.getUTCHours(),k=E.getUTCMinutes(),C=E.getUTCSeconds(),x=E.getUTCMilliseconds();E=(0>=f||f>=1e4?(0>f?"-":"+")+i(6,0>f?-f:f):i(4,f))+"-"+i(2,h+1)+"-"+i(2,g)+"T"+i(2,w)+":"+i(2,k)+":"+i(2,C)+"."+i(3,x)+"Z"}else E=y;if(l&&(E=l.call(r,a,E)),E===y)return"null";if(f=$.call(E),"[object Boolean]"==f)return""+E;if("[object Number]"==f)return E>-1/0&&1/0>E?""+E:"null";if("[object String]"==f)return o(E);if("object"==typeof E){for(a=p.length;a--;)p[a]===E&&e(TypeError());if(p.push(E),S=[],r=u,u+=d,"[object Array]"==f){for(h=0,a=E.length;a>h;_||(_=b),h++)f=s(h,E,l,c,d,u,p),S.push(f===j?"null":f);return _?d?"[\n"+u+S.join(",\n"+u)+"\n"+r+"]":"["+S.join(",")+"]":"[]"}return n(c||E,function(e){var t=s(e,E,l,c,d,u,p);t!==j&&S.push(o(e)+":"+(d?" ":"")+t),_||(_=b)}),_?d?"{\n"+u+S.join(",\n"+u)+"\n"+r+"}":"{"+S.join(",")+"}":"{}"}},w.stringify=function(e,t,n){var a,r,i,o,l;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==$.call(t))r=t;else if("[object Array]"==$.call(t))for(i={},o=t.length;o--;(l=t[o])&&("[object String]"==$.call(l)||"[object Number]"==$.call(l))&&(i[l]=1));if(n)if("[object Number]"==$.call(n)){if((n-=n%1)>0)for(a="",n>10&&(n=10);n>a.length;a+=" ");}else"[object String]"==$.call(n)&&(a=10>=n.length?n:n.slice(0,10));return s("",(l={},l[""]=e,l),r,i,a,"",[])}),l||(c=String.fromCharCode,d={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},u=function(t){for(var n,a,r,i,o,s=t[0],l=s.length;l>t[1];)if(n=s.charAt(t[1]),"	\r\n ".indexOf(n)>-1)t[1]++;else{if("{}[]:,".indexOf(n)>-1)return t[1]++,n;if('"'==n){for(a="@",t[1]++;l>t[1];)if(n=s.charAt(t[1])," ">n&&e(SyntaxError()),"\\"==n)if(n=s.charAt(++t[1]),'\\"/btnfr'.indexOf(n)>-1)a+=d[n],t[1]++;else if("u"==n){for(r=++t[1],i=t[1]+4;i>t[1];t[1]++)n=s.charAt(t[1]),n>="0"&&"9">=n||n>="a"&&"f">=n||n>="A"&&"F">=n||e(SyntaxError());a+=c("0x"+s.slice(r,t[1]))}else e(SyntaxError());else{if('"'==n)break;a+=n,t[1]++}if('"'==s.charAt(t[1]))return t[1]++,a}else{if(r=t[1],"-"==n&&(o=b,n=s.charAt(++t[1])),n>="0"&&"9">=n){for("0"==n&&(n=s.charAt(t[1]+1),n>="0"&&"9">=n)&&e(SyntaxError());l>t[1]&&(n=s.charAt(t[1]),n>="0"&&"9">=n);t[1]++);if("."==s.charAt(t[1])){for(i=++t[1];l>i&&(n=s.charAt(i),n>="0"&&"9">=n);i++);i==t[1]&&e(SyntaxError()),t[1]=i}if(n=s.charAt(t[1]),"e"==n||"E"==n){for(n=s.charAt(++t[1]),("+"==n||"-"==n)&&t[1]++,i=t[1];l>i&&(n=s.charAt(i),n>="0"&&"9">=n);i++);i==t[1]&&e(SyntaxError()),t[1]=i}return+s.slice(r,t[1])}if(o&&e(SyntaxError()),"true"==s.slice(t[1],t[1]+4))return t[1]=t[1]+4,b;if("false"==s.slice(t[1],t[1]+5))return t[1]=t[1]+5,!1;if("null"==s.slice(t[1],t[1]+4))return t[1]=t[1]+4,y}e(SyntaxError())}return"$"},p=function(t,n){var a,r;if("$"==n&&e(SyntaxError()),"string"==typeof n){if("@"==n.charAt(0))return n.slice(1);if("["==n){for(a=[];n=u(t),"]"!=n;r||(r=b))r&&(","==n?(n=u(t),"}"==n&&e(SyntaxError())):e(SyntaxError())),","==n&&e(SyntaxError()),a.push(p(t,n));return a}if("{"==n){for(a={};n=u(t),"}"!=n;r||(r=b))r&&(","==n?(n=u(t),"}"==n&&e(SyntaxError())):e(SyntaxError())),(","==n||"string"!=typeof n||"@"!=n.charAt(0)||":"!=u(t))&&e(SyntaxError()),a[n.slice(1)]=p(t,u(t));return a}e(SyntaxError())}return n},h=function(e,t,n){n=f(e,t,n),n===j?delete e[t]:e[t]=n},f=function(e,t,a){var r,i=e[t];if("object"==typeof i&&i)if("[object Array]"==$.call(i))for(r=i.length;r--;)h(i,r,a);else n(i,function(e){h(i,e,a)});return a.call(e,t,i)},w.parse=function(t,n){var a=[t,0],r=p(a,u(a));return"$"!=u(a)&&e(SyntaxError()),n&&"[object Function]"==$.call(n)?f((a={},a[""]=r,a),"",n):r}))}();